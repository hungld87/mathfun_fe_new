{
    "sourceFile": "server/api/mock/global.get.ts",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 0,
            "patches": [
                {
                    "date": 1765278889944,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                }
            ],
            "date": 1765278889944,
            "name": "Commit-0",
            "content": "import axios from 'axios'\n\nexport default defineEventHandler(async () => {\n  const config = useRuntimeConfig()\n  const apiBase = config.public.apiBase\n  const baseUrl = apiBase.replace('/api', '')\n  \n  try {\n    const response = await axios.get(`${apiBase}/global/full`)\n    \n    const data = response.data.data\n    \n    // console.log('===== GLOBAL API RESPONSE =====')\n    // console.log('Full response:', JSON.stringify(response.data, null, 2))\n    // console.log('data:', data)\n    \n    // Transform Strapi data to frontend format\n    const transformedData = {\n      header: {\n        logo: {\n          text: data.headerLogo?.text || \"MATHFUN\",\n          sub_text: data.headerLogo?.sub_text || \"\",\n          icon: data.headerLogo?.icon?.url ? `${baseUrl}${data.headerLogo.icon.url}` : \"M\",\n          link: data.headerLogo?.link || \"/\"\n        },\n        search: {\n          placeholder: data.headerSearch?.placeholder || \"Tìm kiếm khóa học, bài tập, tài liệu...\",\n          enabled: data.headerSearch?.enabled !== false\n        },\n        navigation: (data.headerNavigation || data.footerNavigation)?.map((item: any) => ({\n          id: item.id,\n          label: item.title,\n          link: item.slug.startsWith('/') ? item.slug : `/${item.slug}`,\n          icon: item.icon,\n          highlight: item.is_highlight || false\n        })) || [],\n        buttons: {\n          login: data.headerButton?.[0] ? {\n            text: data.headerButton[0].text || \"Đăng nhập\",\n            enabled: data.headerButton[0].enabled !== false\n          } : {\n            text: \"Đăng nhập\",\n            enabled: true\n          },\n          consultation: data.headerButton?.[1] ? {\n            text: data.headerButton[1].text || \"Yêu cầu tư vấn\",\n            enabled: data.headerButton[1].enabled !== false\n          } : {\n            text: \"Yêu cầu tư vấn\",\n            enabled: true\n          }\n        }\n      },\n      footer: {\n        brand: {\n          name: data.footerBrand?.name || \"MathFun\",\n          slogan: data.footerBrand?.slogan || \"\",\n          description: data.footerBrand?.description || \"\"\n        },\n        contact: {\n          address: data.footerContact?.address || \"\",\n          phone: data.footerContact?.phone || \"\",\n          email: data.footerContact?.email || \"\",\n          working_hours: data.footerContact?.working_hours || \"\"\n        },\n        navigation: {\n          title: \"Liên Kết\",\n          items: data.footerNavigation?.map((item: any) => ({\n            id: item.id,\n            title: item.title,\n            slug: item.slug\n          })) || []\n        },\n        resources: {\n          title: \"Tài Nguyên\",\n          items: data.footerResources?.map((item: any) => ({\n            id: item.id,\n            title: item.title,\n            slug: item.slug\n          })) || []\n        },\n        policies: {\n          title: \"Chính Sách\",\n          items: data.footerPolicies?.map((item: any) => ({\n            id: item.id,\n            title: item.title,\n            slug: item.slug\n          })) || []\n        },\n        centers: {\n          title: \"Trung Tâm\",\n          items: data.centers?.map((item: any) => ({\n            id: item.id,\n            name: item.name,\n            location: item.location,\n            address: item.address\n          })) || []\n        },\n        newsletter: {\n          title: data.footerNewsletter?.title || \"Đăng Ký Nhận Tin\",\n          description: data.footerNewsletter?.description || \"\",\n          placeholder: data.footerNewsletter?.placeholder || \"Email của bạn\",\n          button_text: data.footerNewsletter?.button_text || \"Đăng ký\",\n          enabled: data.footerNewsletter?.enabled !== false\n        },\n        social: {\n          title: \"Kết Nối Với Chúng Tôi\",\n          links: data.footerSocaial?.map((item: any) => ({\n            id: item.id,\n            name: item.name,\n            url: item.url,\n            icon: item.icon?.url ? `${baseUrl}${item.icon.url}` : null\n          })) || []\n        },\n        copyright: {\n          text: data.footerCopyright?.text || \"© 2024 MathFun. All rights reserved.\",\n          company: data.footerCopyright?.company || \"\"\n        },\n        certifications: data.footerCertifications?.map((item: any) => ({\n          id: item.id,\n          name: item.name,\n          image: item.image?.url ? `${baseUrl}${item.image.url}` : null\n        })) || []\n      },\n      seo: {\n        default_title: data.seo?.default_title || \"MathFun - Học Toán Thông Minh\",\n        default_description: data.seo?.default_description || \"\",\n        default_keywords: data.seo?.default_keywords || \"\",\n        og_image: data.seo?.og_image?.url ? `${baseUrl}${data.seo.og_image.url}` : null\n      },\n      theme: {\n        primary_color: data.footerTheme?.primary_color || \"#3FB3AA\",\n        primary_dark_color: data.footerTheme?.primary_dark_color || \"#359A91\",\n        secondary_color: data.footerTheme?.secondary_color || \"#FF6B35\",\n        success_color: data.footerTheme?.success_color || \"#27AE60\",\n        warning_color: data.footerTheme?.warning_color || \"#F39C12\",\n        error_color: data.footerTheme?.error_color || \"#E74C3C\",\n        teal_50: data.footerTheme?.teal_50 || \"#F0FDFA\",\n        teal_100: data.footerTheme?.teal_100 || \"#CCFBF1\",\n        teal_500: data.footerTheme?.teal_500 || \"#14B8A6\",\n        teal_600: data.footerTheme?.teal_600 || \"#0D9488\"\n      },\n      features: {\n        maintenance_mode: data.footerFeatures?.maintenance_mode || false,\n        show_promotion_banner: data.footerFeatures?.show_promotion_banner !== false,\n        enable_chat_support: data.footerFeatures?.enable_chat_support !== false,\n        enable_notifications: data.footerFeatures?.enable_notifications !== false\n      }\n    }\n    \n    return {\n      status: 'ok',\n      data: transformedData\n    }\n  } catch (error) {\n    console.error('Error fetching global data:', error)\n    return {\n      status: 'error',\n      data: null,\n      message: 'Failed to fetch global data from API'\n    }\n  }\n})\n"
        }
    ]
}